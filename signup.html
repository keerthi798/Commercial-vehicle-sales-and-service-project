{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <!-- Design by foolishdeveloper.com -->
    <title>Glassmorphism login Form Tutorial in html css</title>
 
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
    <!--Stylesheet-->
    <style media="screen">
        *,
        *:before,   
*:after{
    padding: 1;
    margin: 1;
    box-sizing: border-box;
}
body{
    background-color: #080710;
}
.background{
    width: 430px;
    height: 620px;
    position: absolute;
    transform: translate(-50%,-50%);
    left: 50%;
    top: 50%;
}
.background .shape{
    height: 200px;
    width: 200px;
    position: absolute;
    border-radius: 30%;
}
.shape:first-child{
    background: linear-gradient(
        #1845ad,
        #23a2f6
    );
    left: -80px;
    top: -80px;
}
.shape:last-child{
    background: linear-gradient(
        to right,
        #ff512f,
        #f09819
    );
    right: -30px;
    bottom: -80px;
}
form{
    height: 550px;
    width: 450px;
    background-color: rgba(255,255,255,0.13);
    position: absolute;
    transform: translate(-50%,-50%);
    top: 55%;
    left: 50%;
    border-radius: 10px;
    backdrop-filter: blur(10px);
    border: 3px solid rgba(255,255,255,0.1);
    box-shadow: 0 0 40px rgba(8,7,16,0.6);
    padding: 10px 15px;
}
form *{
    font-family: 'Poppins',sans-serif;
    color: #ffffff;
    letter-spacing: 0.5px;
    outline: none;
    border: none;
}
form h3{
    font-size: 22px;
    font-weight: 400;
    line-height: 22px;
    text-align: center;
}

label{
    display: block;
    margin-top: 20px;
    font-size: 16px;
    font-weight: 90;
}
input{
    display: block;
    height: 40px;
    width: 100%;
    background-color: rgba(255,255,255,0.07);
    border-radius: 3px;
    padding: 0 10px;
    margin-top: 5px;
    font-size: 14px;
    font-weight: 200;
}

div{
        display: block; 
        margin-bottom: 5px;
}
::placeholder{
    color: #e5e5e5;
}
button{
    margin-top: 400px0px;
    width: 100%;
    background-color: #ffffff;
    color: #080710;
    padding: 8px 0;
    font-size: 18px;
    font-weight: 500;
    border-radius: 5px;
    cursor: pointer;
}
.social{
  margin-top: 50px;
  display: flex;
}
.social div{
  background: red;
  width: 450px;
  border-radius: 3px;
  padding: 3px 9px 12px 5px;
  background-color: rgba(255,255,255,0.27);
  color: #eaf0fb;
  text-align: center;
}
.social div:hover{
  background-color: rgba(255,255,255,0.47);
}
.social .fb{
  margin-left: 25px;
}
.social i{
  margin-right: 4px;
}
input[type="radio"] {
    width: 16px;
    height: 16px;
    font-size: 14px;
    display: inline-block;
}
</style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">Sparx Motors<span class="dot">.</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about"></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="">vehicle</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="">Services</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="">Spare parts</a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="btn btn-brand" href="{% url 'login' %}">login</a>
                    </li>
                    <li class="nav-item">
                        <a class="" href=""></a> 
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-brand" href="{% url 'signup' %}">signup</a>
                    </li>
                {% endif %}
                </ul>
               
            </div>
        </div>
    </nav>

    <div class="background">
        <div class="shape"></div>
        <div class="shape"></div>
    </div>
    <form  method="POST" action="{% url 'signup' %}">
         {% csrf_token %}
        <h3>Sign up</h3>

        <label for="username">username</label>
        <input type="text" name="username" placeholder="username" id="username" required>
        <span id="usernameError" style="color: red;"></span>

        <label for="email">Email</label>
        <input type="Email" name="email"placeholder="Email" id="email" required>
        <span id="emailError" style="color: red;"></span>

        <label for="password">Password</label>
        <input type="password" name="password" placeholder="Password" id="password"required>
        <span id="passwordError" style="color: red;"></span>

        <label for="confirm_password">Confirm Password</label>
        <input type="password" name="confirm_password" placeholder="Confirm Password" id="confirm_password"required>
        <span id="confirmPasswordError" style="color: red;"></span>
        <button type="submit" id="submitBtn">Log In</button>
        {% if error_message %}
            <div style="color: red;">
                {{ error_message }}
            </div>
        {% endif %}
    </div>
    <p>Already have an account? <a href="{% url 'login' %}">login</a></p>
   </div>
   <script>
    const usernameInput = document.getElementById('username');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirm_password');
    const submitBtn = document.getElementById('submitBtn');

    usernameInput.addEventListener('input', validateUsername);
    emailInput.addEventListener('input', validateEmail);
    passwordInput.addEventListener('input', validatePassword);
    confirmPasswordInput.addEventListener('input', validateConfirmPassword);
   
    function validateUsername() {
        const username = usernameInput.value;
        const usernameError = document.getElementById('usernameError');
    
        // Check if the username starts with a capital letter
        if (!/^[A-Z].*$/.test(username)) {
            usernameError.textContent = 'Username must start with a capital letter.';
        } else if (!/^[A-Z][a-zA-Z0-9]{0,9}$/.test(username)) {
            // Check if the username contains characters other than uppercase letters, lowercase letters, and numbers
            usernameError.textContent = 'Username can only contain uppercase letters followed by lowercase letters, characters, and numbers (maximum 10 characters).';
        } else if (/\s/.test(username)) {
            // Check if the username contains white spaces
            usernameError.textContent = 'Username cannot contain white spaces.';
        } else {
            usernameError.textContent = 'Valid username.';
        }
    
        checkFormValidity();
    }
    
    function validateEmail() {
        const email = emailInput.value;
        const emailError = document.getElementById('emailError');
        if (!isValidEmail(email)) {
            emailError.textContent = 'Invalid email address.';
        } else {
            emailError.textContent = '';
        }
        checkFormValidity();
    }

    function validatePassword() {
        const password = passwordInput.value;
        const passwordError = document.getElementById('passwordError');
        if (!/^[A-Z].{4,}$/.test(password)) {
            passwordError.textContent = 'Password must start with a capital letter and be at least 5 characters long.';
        } else {
            passwordError.textContent = '';
        }
        checkFormValidity();
    }

    function validateConfirmPassword() {
        const confirmPassword = confirmPasswordInput.value;
        const password = passwordInput.value;
        const confirmPasswordError = document.getElementById('confirmPasswordError');
        if (password !== confirmPassword) {
            confirmPasswordError.textContent = 'Passwords do not match.';
        } else {
            confirmPasswordError.textContent = '';
        }
        checkFormValidity();
    }

    function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function checkFormValidity() {
        if (
            usernameInput.validity.valid &&
            emailInput.validity.valid &&
            passwordInput.validity.valid &&
            confirmPasswordInput.validity.valid &&
            passwordInput.value === confirmPasswordInput.value
        ) {
            submitBtn.removeAttribute('disabled');
        } else {
            submitBtn.setAttribute('disabled', 'disabled');
        
        }
    }
</script>
</body>
</html>

